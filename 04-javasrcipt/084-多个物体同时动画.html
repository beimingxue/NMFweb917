<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>多个物体同时动画</title>
	<style>
	   *{
	   	margin: 0;
	   	padding: 0;
	   }
		div{
			width: 100px;
			height: 100px;
			background: red;
			margin-top: 20px;
			margin-left: 20px;
			opacity: 0.3;
		}
	</style>
	<script>
		 //var timer = null;
		 function animation(obj,attr,iTarget){
		 	 clearInterval(obj.timer);
		 	 obj.timer = setInterval(function(){
                 var iSpeed = 0;
                 var curr = parseFloat(getComputedStyle(obj,false)[attr]);
                 if(attr == 'opacity'){
                      curr = curr * 100;
                 }
                 if(curr > iTarget){
                      iSpeed = -10;
                 }else{
                 	  iSpeed = 10;
                 }
                 if(Math.abs(iTarget-curr) <= Math.abs(iSpeed)){
                 	   clearInterval(obj.timer);
                 	   if(attr == 'opacity'){
                             obj.style[attr] = iTarget / 100;
                 	   }else{
                 	   	    obj.style[attr] = iTarget + 'px';
                 	   }
                       
                 }else{
                 	   if(attr == 'opacity'){
                              obj.style[attr] = (curr + iSpeed)/100;
                 	   }else{
                              obj.style[attr] = curr + iSpeed + 'px';
                 	   }            	   
                 }

              /*   if(obj.offsetwidth > iTarget){
                      iSpeed = -10;
                 }else{
                 	  iSpeed = 10;
                 }
                 if(Math.abs(iTarget-obj.offsetwidth) <= Math.abs(iSpeed)){
                       obj.style.width = iTarget + 'px';
                 }else{
                 	   obj.style.width = obj.offsetwidth + iSpeed + 'px';
                 }*/

		 	 },30)
		 }
		 window.onload = function(){
		 	  var oDiv1 = document.getElementById('div1');
		 	  var oDiv2 = document.getElementById('div2');
		 	  var oDiv3 = document.getElementById('div3');
            
		     oDiv1.onmouseover = function(){
				animation(this,'width',400);
			}
		  
		 }

	</script>
</head>
<body>
	<div class="div1">变宽</div>
	<div class="div2">变高</div>
	<div class="div3"></div>
</body>
</html>